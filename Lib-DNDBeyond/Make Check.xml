<net.rptools.maptool.model.MacroButtonProperties>
  <macroUUID>81d71a98-db40-48db-9ae5-31ce332ad523</macroUUID>
  <saveLocation>Token</saveLocation>
  <index>49</index>
  <colorKey>default</colorKey>
  <hotKey>None</hotKey>
  <command>
[h, if (json.length (macro.args) &gt; 0), code: {
	[h: inputObj = arg (0)]
	[h: bonus = json.get (inputObj, "bonus")]
	[h: advDisadv = json.get (inputObj, "advDisadv")]
	[h: checkLabel = json.get (inputObj, "checkLabel")]
}; {
	&lt;!-- "variableName|value|prompt|inputType|options" --&gt;
	[h: abort (input (
		" checkLabel | A Check | Text ",
		" bonus | 0 | Check bonus | Text ",
		" advDisadv | None, Advantage, Disadvantage | Advantage / Disadvantage | List "))]
}]

[h: checkExpr = "1d20 + " + bonus]
[h: roll1 = eval (checkExpr)]
[h: roll2 = eval (checkExpr)]
[h: actual = roll1]
[h: atkString = "&lt;b&gt;" + checkLabel + "&lt;br&gt;" + checkExpr + "&lt;/b&gt;: " + roll1]
[h, if (advDisadv == 1), code: {
	[h: atkString = atkString + "&lt;br&gt;&lt;b&gt;Advantage:&lt;/b&gt; " + roll2]
	[h: actual = max (roll1, roll2)]
}]
[h, if (advDisadv == 2), code: {
	[h: atkString = atkString + "&lt;br&gt;&lt;b&gt;Disadvantage:&lt;/b&gt; " + roll2]
	[h: actual = min (roll1, roll2)]	
}]
[h, if (advDisadv &gt; 0): atkString = atkString + "&lt;br&gt;&lt;br&gt;&lt;b&gt;Actual:&lt;/b&gt; " + actual]
[r: atkString]</command>
  <label>Make Check</label>
  <group>Token</group>
  <sortby>100</sortby>
  <autoExecute>true</autoExecute>
  <includeLabel>false</includeLabel>
  <applyToTokens>true</applyToTokens>
  <fontColorKey>black</fontColorKey>
  <fontSize>1.05em</fontSize>
  <minWidth/>
  <maxWidth/>
  <allowPlayerEdits>false</allowPlayerEdits>
  <toolTip>Generic check macro, usually called as a sub-process but works stand-alone</toolTip>
  <displayHotKey>true</displayHotKey>
  <commonMacro>false</commonMacro>
  <compareGroup>true</compareGroup>
  <compareSortPrefix>true</compareSortPrefix>
  <compareCommand>true</compareCommand>
  <compareIncludeLabel>true</compareIncludeLabel>
  <compareAutoExecute>true</compareAutoExecute>
  <compareApplyToSelectedTokens>true</compareApplyToSelectedTokens>
</net.rptools.maptool.model.MacroButtonProperties>
